{"version":3,"names":["_ensureMetadata","_interopRequireDefault","require","_ensureTotals","_nativeTypes","e","__esModule","default","saveWorkoutSample","typeIdentifier","quantities","_start","options","start","toISOString","end","Date","Native","map","quantity","startDate","endDate","rest","updatedQuantity","metadata","ensureMetadata","ensureTotals","totals","_default","exports"],"sources":["saveWorkoutSample.ts"],"sourcesContent":["import ensureMetadata from './ensureMetadata'\nimport ensureTotals from './ensureTotals'\nimport Native from '../native-types'\n\nimport type { HKWorkoutActivityType, HKWorkoutMetadata } from '../native-types'\nimport type { HKQuantitySampleForSaving } from '../types'\n\nasync function saveWorkoutSample<TIdentifier extends HKWorkoutActivityType>(\n  typeIdentifier: TIdentifier,\n  quantities: readonly HKQuantitySampleForSaving[],\n  _start: Date,\n  options?: {\n    readonly end?: Date;\n    readonly totals?: {\n      readonly distance?: number;\n      readonly energyBurned?: number;\n    }\n    readonly metadata?: HKWorkoutMetadata;\n  },\n) {\n  const start = _start.toISOString()\n  const end = (options?.end || new Date()).toISOString()\n\n  return Native.saveWorkoutSample(\n    typeIdentifier,\n    quantities.map((quantity) => {\n      const { startDate, endDate, ...rest } = quantity\n      const updatedQuantity = {\n        ...rest,\n        ...(startDate && { startDate: startDate.toISOString() }),\n        ...(endDate && { endDate: endDate.toISOString() }),\n      }\n      return { ...updatedQuantity, metadata: ensureMetadata(quantity.metadata) }\n    }),\n    start,\n    end,\n    ensureTotals(options?.totals),\n    ensureMetadata(options?.metadata),\n  )\n}\n\nexport default saveWorkoutSample\n"],"mappings":";;;;;;AAAA,IAAAA,eAAA,GAAAC,sBAAA,CAAAC,OAAA;AACA,IAAAC,aAAA,GAAAF,sBAAA,CAAAC,OAAA;AACA,IAAAE,YAAA,GAAAH,sBAAA,CAAAC,OAAA;AAAoC,SAAAD,uBAAAI,CAAA,WAAAA,CAAA,IAAAA,CAAA,CAAAC,UAAA,GAAAD,CAAA,KAAAE,OAAA,EAAAF,CAAA;AAKpC,eAAeG,iBAAiBA,CAC9BC,cAA2B,EAC3BC,UAAgD,EAChDC,MAAY,EACZC,OAOC,EACD;EACA,MAAMC,KAAK,GAAGF,MAAM,CAACG,WAAW,CAAC,CAAC;EAClC,MAAMC,GAAG,GAAG,CAAC,CAAAH,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEG,GAAG,KAAI,IAAIC,IAAI,CAAC,CAAC,EAAEF,WAAW,CAAC,CAAC;EAEtD,OAAOG,oBAAM,CAACT,iBAAiB,CAC7BC,cAAc,EACdC,UAAU,CAACQ,GAAG,CAAEC,QAAQ,IAAK;IAC3B,MAAM;MAAEC,SAAS;MAAEC,OAAO;MAAE,GAAGC;IAAK,CAAC,GAAGH,QAAQ;IAChD,MAAMI,eAAe,GAAG;MACtB,GAAGD,IAAI;MACP,IAAIF,SAAS,IAAI;QAAEA,SAAS,EAAEA,SAAS,CAACN,WAAW,CAAC;MAAE,CAAC,CAAC;MACxD,IAAIO,OAAO,IAAI;QAAEA,OAAO,EAAEA,OAAO,CAACP,WAAW,CAAC;MAAE,CAAC;IACnD,CAAC;IACD,OAAO;MAAE,GAAGS,eAAe;MAAEC,QAAQ,EAAE,IAAAC,uBAAc,EAACN,QAAQ,CAACK,QAAQ;IAAE,CAAC;EAC5E,CAAC,CAAC,EACFX,KAAK,EACLE,GAAG,EACH,IAAAW,qBAAY,EAACd,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEe,MAAM,CAAC,EAC7B,IAAAF,uBAAc,EAACb,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEY,QAAQ,CAClC,CAAC;AACH;AAAC,IAAAI,QAAA,GAAAC,OAAA,CAAAtB,OAAA,GAEcC,iBAAiB","ignoreList":[]}